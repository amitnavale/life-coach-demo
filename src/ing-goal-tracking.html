<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/iron-image/iron-image.html">
<link rel="import" href="ing-share-with-friends.html">


<dom-module id="ing-goal-tracking">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
        padding: 10px;
         @apply(--layout-horizontal);
      }
	  .container {
		width: 100%;
		text-align: center;
		background: #fff;
		
	  }
	  .chart {
		
	  }
	  .goal-list {
		height: 40px;
		background: #4285F4;
		width: 100%;
		border-bottom: 1px solid #ccc;
		text-align: left;
		padding: 15px 20px 0 20px;
		float:left;
		color: #fff;
	  }
	  .right-arrow {
		align:right;
		float:right;
		padding-right: 20px;
	  }
	  
    </style>

    <div class="container">
		<ing-share-with-friends></ing-share-with-friends>
		<div class="chart">
			<highcharts-chart type="spline"  height-responsive x-axis="{{xAxis}}" y-Axis ="{{yAxis}}"  data="{{chartData}}" highchartOptions="{height:50px;}" title='Goal Tracking'  x-label="Time" y-label="% of Completion" loadingMessage="loading..."></highcharts-chart>
		</div>
		<template is="dom-repeat" items="{{goalsData}}">
			<div class="goal-list">{{item.specific}} <span class="right-arrow"> ></span></div>
		</template>
		<div class="goal-list" style="text-align:center;">+</div>
    </div>
		
  </template>

  <script>
    Polymer({
      is: 'ing-goal-tracking',
      properties: {
		goalsData: {
          type: Object
        },
		chartData: {
          type: Object
        },
		xAxis: {
          type: Object
        },
		yAxis: {
          type: Object
        },
		chartOptions: {
          type: Object
        },
		legendOptions: {
			type: Object
		}
      },
	  ready: function() {
		this.goalsData = [{"category":"Romance","id":"RM", "specific":"Specific 1","measure":"Measure 1","tasks":[{"desc":"Go on date","date":"2017-03-15","completed":1},{"desc":"Go for Movie","date":"2017-04-17","completed":0},{"desc":"Baby Sit ","date":"2017-03-31","completed":0}],"realistic":"Realistic 1","timebased":"2017-04-01","startDate":"2017-03-10"},
{"category":"Health","id":"HL","specific":"Specific 1","measure":"Measure 1","tasks":[{"desc":"10000 steps first day","date":"2017-03-16","completed":0},{"desc":"Run for 2 kms","date":"2017-05-01","completed":0},{"desc":"Eat Vegetarian","date":"2017-04-01","completed":0}],"realistic":"Realistic 1","timebased":"2017-04-01","startDate":"2017-03-10"},
{"category":"Finance","id":"FN","specific":"Specific 1","measure":"Measure 1","tasks":[{"desc":"Lunch from home","date":"2017-03-15","completed":0},{"desc":"No shopping","date":"2017-03-17","completed":0}],"realistic":"Realistic 1","timebased":"2017-04-01","startDate":"2017-03-10"}];

		var categories = ['1 Jan 17', '2 Feb 17', '4 Mar 17', '15 Apr 17', '20 May 17', ' 5 Jun 17'];
		var jdata = {
			"Goal 1": {
				"y": [10,20,30,40,60,90],
				"name": "Goal 1",
				"catId": "RM"
			},
			"Goal 2": {
				"y": [5,10,40,60,70,100],
				"name": "Goal 2",
				"catId": "RM"
			},
			"Goal 3": {
				"y": [10,15,30,40,70,100],
				"name": "Goal 3",
				"catId": "RM"
			}
		};
		this.xAxis = {categories: categories};
		var seriesArr = [];
		$.each(jdata, function (key, data) {
			var series = {
				name: key,
				data: [],
			};

			$.each(data.y, function (index, value) {
			
				series.data.push([categories[index] , value]);
				/*series.data.push({
					y: value
					
				});*/
			});

		   console.log("each series...", series);
			seriesArr.push(series);
		});
		
		
		/*this.yAxis = {
            title: {
                text: 'Rate',
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }],
            min: 0
        };*/
        
        this.chartData = seriesArr;
		
       
      }
    });
  </script>
</dom-module>
